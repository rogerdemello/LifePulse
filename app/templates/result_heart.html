{% extends "base.html" %}

{% block title %}Heart Disease Risk Assessment Result - LifePulse{% endblock %}
{% block description %}Your personalized heart disease risk assessment results with AI-powered analysis and health recommendations.{% endblock %}

{% block content %}

<div class="container py-5">
  <div class="text-center mb-4">
    <h2 class="fw-bold mb-2">‚ù§Ô∏è Heart Disease Risk Assessment</h2>
    <p class="text-muted">Your personalized cardiovascular health evaluation</p>
  </div>

  <div class="row justify-content-center">
    <div class="col-md-10">
      
      <!-- Main Result Card -->
      <div class="card result-card border-0 shadow mb-4">
        {% if prediction == "Yes" %}
          <div class="result-card-header" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
        {% else %}
          <div class="result-card-header" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
        {% endif %}
          <div class="text-center position-relative">
            <h3 class="mb-2">
              {% if prediction == "Yes" %}
                ‚ö†Ô∏è High Risk Detected
              {% else %}
                ‚úÖ Low Risk Profile
              {% endif %}
            </h3>
            <p class="mb-0 opacity-90">Cardiovascular Health Assessment Complete</p>
          </div>
        </div>

        <div class="result-card-body p-5">
          
          <!-- Risk Gauge -->
          <div class="text-center mb-5">
            <div id="riskGauge" data-gauge-chart data-percentage="{{ probability }}" data-label="Risk Level"></div>
            
            <div class="mt-4">
              {% if prediction == "Yes" %}
                <span class="probability-badge" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white;">
                  <i class="bi bi-exclamation-triangle-fill"></i>
                  {{ probability }}% Risk Probability
                </span>
              {% else %}
                <span class="probability-badge" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%); color: white;">
                  <i class="bi bi-check-circle-fill"></i>
                  {{ probability }}% Health Score
                </span>
              {% endif %}
            </div>
          </div>

          <!-- Result Message -->
          <div class="text-center mb-4 py-3">
            {% if prediction == "Yes" %}
              <div class="display-1 mb-3">‚ö†Ô∏è</div>
              <h4 class="text-danger mb-3">Elevated Heart Disease Risk</h4>
              <p class="text-muted lead">
                Based on your health indicators, our AI model has detected a significant risk for heart disease. 
                This requires immediate attention and professional medical consultation.
              </p>
              <div class="alert alert-danger border-0 shadow-sm mt-4" role="alert">
                <h6 class="fw-bold mb-2"><i class="bi bi-info-circle"></i> Important Notice:</h6>
                <p class="mb-0">
                  This is a screening tool, not a diagnosis. Please consult with a cardiologist 
                  or healthcare provider for a comprehensive evaluation and personalized treatment plan.
                </p>
              </div>
            {% else %}
              <div class="display-1 mb-3">‚úÖ</div>
              <h4 class="text-success mb-3">Healthy Heart Profile</h4>
              <p class="text-muted lead">
                Great news! Your health indicators suggest a low risk of heart disease. 
                Your cardiovascular system appears to be functioning well.
              </p>
              <div class="alert alert-success border-0 shadow-sm mt-4" role="alert">
                <h6 class="fw-bold mb-2"><i class="bi bi-heart-fill"></i> Keep It Up!</h6>
                <p class="mb-0">
                  Continue maintaining your healthy lifestyle choices. Regular check-ups and 
                  preventive care will help you stay on track for long-term heart health.
                </p>
              </div>
            {% endif %}
          </div>

          <hr class="my-5">

          <!-- Recommendations -->
          <div class="mb-4">
            <h5 class="fw-bold mb-4">
              <i class="bi bi-clipboard-heart"></i> Recommendations
            </h5>
            
            {% if prediction == "Yes" %}
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">üè•</span>
                    <div class="stat-card-label">Immediate Action</div>
                    <p class="small mt-2 mb-0 text-muted">Schedule a cardiology appointment</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">üíä</span>
                    <div class="stat-card-label">Medical Review</div>
                    <p class="small mt-2 mb-0 text-muted">Discuss medications with your doctor</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">ü•ó</span>
                    <div class="stat-card-label">Diet Changes</div>
                    <p class="small mt-2 mb-0 text-muted">Adopt heart-healthy eating habits</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">üö∂</span>
                    <div class="stat-card-label">Physical Activity</div>
                    <p class="small mt-2 mb-0 text-muted">Start gentle, regular exercise</p>
                  </div>
                </div>
              </div>
            {% else %}
              <div class="row g-3">
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">üèÉ</span>
                    <div class="stat-card-label">Stay Active</div>
                    <p class="small mt-2 mb-0 text-muted">150+ minutes of exercise weekly</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">ü•ë</span>
                    <div class="stat-card-label">Healthy Diet</div>
                    <p class="small mt-2 mb-0 text-muted">Continue nutritious food choices</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">üìÖ</span>
                    <div class="stat-card-label">Regular Check-ups</div>
                    <p class="small mt-2 mb-0 text-muted">Annual health screenings</p>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="stat-card">
                    <span class="stat-card-icon">üòå</span>
                    <div class="stat-card-label">Stress Management</div>
                    <p class="small mt-2 mb-0 text-muted">Practice relaxation techniques</p>
                  </div>
                </div>
              </div>
            {% endif %}
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="text-center mt-4">
        <a href="{{ url_for('heart_disease.predict_heart_disease') }}" class="btn btn-primary btn-lg me-2">
          <i class="bi bi-arrow-repeat"></i> Take Another Assessment
        </a>
        <a href="/" class="btn btn-outline-secondary btn-lg">
          <i class="bi bi-house-fill"></i> Back to Home
        </a>
      </div>

    </div>
  </div>
</div>

<script>
  // Show toast on page load
  document.addEventListener('DOMContentLoaded', () => {
    const prediction = "{{ prediction }}";
    if (window.toast) {
      if (prediction === "Yes") {
        toast.warning('Assessment complete. Please consult a healthcare provider.', 5000);
      } else {
        toast.success('Assessment complete. Your heart health looks good!', 5000);
      }
    }
  });
</script>

{% endblock %}



